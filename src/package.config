<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <package name="stsim-cbmcfs3" displayName="Integrates the Carbon Budget Model for the Canadian Forest Sector (CBM-CFS3) into the ST-Sim simulation model." version="1.0.0" isAddOn="True" extendsPackage="stsim" requiresAddOns="stsim-stockflow" configVersion="2.0000" url="https://github.com/ApexRMS/stsim-cbmcfs3">
    <transformers>
      <transformer name="primary" displayName="CBM-CFS3 Flow Pathways" isPrimary="True" extendsTransformer="stsim__runtime" userRunnable="True" runOrder="Before" runContext="LocalOnly" programName="Rscript.exe" programArguments="transformer.R" className="SyncroSim.StochasticTime.StochasticTimeTransformer" classAssembly="SyncroSim.StochasticTime" configurationSheet="stsim___RunControl">
        <datafeeds>
          <datafeed name="cbm-database" displayName="CBM-CFS3 Database" dataScope="Library">
            <datasheets>
              <datasheet name="Database" displayName="CBM-CFS3 Database" isSingleRow="True">
                <columns>
                  <column name="CBMDatabaseID" dataType="Integer" isPrimary="True"/>
                  <column name="Path" dataType="String" isExternalFile="True" externalFileAbsolute="True" externalFileFilter="CBM-CFS3 Files|*.mdb;*.accdb|All Files|*.*"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
          <datafeed name="ecoboundary" displayName="Ecological Boundary" dataScope="Project">
            <datasheets>
              <datasheet name="EcoBoundary" displayName="Ecological Boundary" valueMember="EcoBoundaryID" displayMember="Name">
                <columns>
                  <column name="EcoBoundaryID" dataType="Integer" isPrimary="True"/>
                  <column name="ProjectID" dataType="Integer"/>
                  <column name="Name" dataType="String"/>
                  <column name="Description" dataType="String" isOptional="True"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
          <datafeed name="adminboundary" displayName="Administrative Boundary" dataScope="Project">
            <datasheets>
              <datasheet name="AdminBoundary" displayName="Administrative Boundary" valueMember="AdminBoundaryID" displayMember="Name">
                <columns>
                  <column name="AdminBoundaryID" dataType="Integer" isPrimary="True"/>
                  <column name="ProjectID" dataType="Integer"/>
                  <column name="Name" dataType="String"/>
                  <column name="Description" dataType="String" isOptional="True"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
          <datafeed name="speciestype" displayName="Species Type" dataScope="Project">
            <datasheets>
              <datasheet name="SpeciesType" displayName="Species Type" valueMember="SpeciesTypeID" displayMember="Name">
                <columns>
                  <column name="SpeciesTypeID" dataType="Integer" isPrimary="True"/>
                  <column name="ProjectID" dataType="Integer"/>
                  <column name="Name" dataType="String"/>
                  <column name="Description" dataType="String" isOptional="True"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
          <datafeed name="disturbancetype" displayName="Disturbance Type" dataScope="Project">
            <datasheets>
              <datasheet name="DisturbanceType" displayName="Disturbance Type" valueMember="DisturbanceTypeID" displayMember="Name">
                <columns>
                  <column name="DisturbanceTypeID" dataType="Integer" isPrimary="True"/>
                  <column name="ProjectID" dataType="Integer"/>
                  <column name="Name" dataType="String"/>
                  <column name="Description" dataType="String" isOptional="True"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
           <datafeed name="stsc-crosswalk" displayName="CBM-CFS3 Crosswalk Spatial Unit and Species Type" dataScope="Scenario">
            <datasheets>
              <datasheet name="CrosswalkSpecies" displayName="CBM-CFS3 Crosswalk Species">
                <columns>
                  <column name="CrosswalkSpeciesID" dataType="Integer" isPrimary="True"/>
                  <column name="ScenarioID" dataType="Integer" isCompositeIndex="True"/>
                  <column name="EcoBoundaryID" dataType="Integer" displayName="CBM-CFS3 Ecological Boundary" validationType="Datasheet" formula1="EcoBoundary" allowDbNull="False"/>
                  <column name="AdminBoundaryID" dataType="Integer" displayName="CBM-CFS3 Administrative Boundary" validationType="Datasheet" formula1="AdminBoundary" allowDbNull="False"/>
                  <column name="SpeciesTypeID" dataType="Integer" displayName="CBM-CFS3 Species Type" validationType="Datasheet" formula1="SpeciesType" allowDbNull="False"/>
                  <column name="StratumID" dataType="Integer" displayName="ST-Sim Stratum" validationType="Datasheet" formula1="stsim__Stratum" isOptional="True" initOptionalVisible="True"/>
                  <column name="SecondaryStratumID" dataType="Integer" displayName="ST-Sim Secondary Stratum" validationType="Datasheet" formula1="stsim__SecondaryStratum" isOptional="True" initOptionalVisible="True"/>
                  <column name="TertiaryStratumID" dataType="Integer" displayName="ST-Sim Tertiary Stratum" validationType="Datasheet" formula1="stsim__TertiaryStratum" isOptional="True" displayNameSource="stsim__Terminology" displayNameColumn="TertiaryStratumLabel"/>
                  <column name="StateClassID" dataType="Integer" displayName="ST-Sim State Class" validationType="Datasheet" formula1="stsim__StateClass" isOptional="True" initOptionalVisible="True" />
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>
          <datafeed name="tg-crosswalk" displayName="CBM-CFS3 Crosswalk Disturbance" dataScope="Scenario">
            <datasheets>
              <datasheet name="CrosswalkDisturbance" displayName="CBM-CFS3 Crosswalk Disturbance">
                <columns>
                  <column name="CrosswalkDisturbanceID" dataType="Integer" isPrimary="True"/>
                  <column name="ScenarioID" dataType="Integer" isCompositeIndex="True"/>
                  <column name="DisturbanceTypeID" dataType="Integer" displayName="CBM-CFS3 Disturbance Type" validationType="Datasheet" formula1="DisturbanceType" allowDbNull="False"/>
                  <column name="TransitionGroupID" dataType="Integer" displayName="ST-Sim Transition Type/Group" validationType="Datasheet" formula1="stsim__TransitionGroup" allowDbNull="False"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed> 
          <datafeed name="sf-crosswalk" displayName="CBM-CFS3 Crosswalk Carbon Stock" dataScope="Scenario">
            <datasheets>
              <datasheet name="CrosswalkStock" displayName="CBM-CFS3 Crosswalk Carbon Stock">
                <columns>
                  <column name="CrosswalkStockID" dataType="Integer" isPrimary="True"/>
                  <column name="ScenarioID" dataType="Integer" isCompositeIndex="True"/>
                  <column name="CBMStock" dataType="String" displayName="CBM-CFS3 Stock" allowDbNull="False"/>
                  <column name="StockTypeID" dataType="Integer" displayName="ST-Sim Stock Type" validationType="Datasheet" formula1="stsim_stockflow__StockType" allowDbNull="False"/>
                </columns>
              </datasheet>
            </datasheets>
          </datafeed>           
        </datafeeds>
      </transformer>
    </transformers>
    <layouts>
      <layout name="system_forms__library-datafeeds" appendTo="Options">
        <item name="cbm-database"/>
      </layout>
      <layout name="system_forms__project-datafeeds" appendTo="Advanced">
        <group name="CBM-CFS3">
          <item name="ecoboundary"/>
          <item name="adminboundary"/>
          <item name="speciestype"/>
          <item name="disturbancetype"/>
        </group>
      </layout>
      <layout name="system_forms__scenario-datafeeds" appendTo="Advanced">
        <group name="CBM-CFS3 to ST-Sim Crosswalk">
          <item name="stsc-crosswalk" displayName="Spatial Unit and Species Type"/>
          <item name="tg-crosswalk" displayName="Disturbance"/>
          <item name="sf-crosswalk" displayName="Carbon Stock"/>         
        </group>
      </layout>      
    </layouts>
  </package>
</configuration>
